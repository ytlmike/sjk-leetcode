kind: pipeline
type: docker
name: leetcoder

steps:
  - name: build
    image: ytlmike/php-composer:7.3
    environment:
      - MYSQL_HOST=$MYSQL_HOST
#    volumes:
#      - name: cache
#        path: /data/composer
    commands:
      - echo $MYSQL_HOST
      - composer install --no-dev --optimize-autoloader

  - name: deploy
    image: alpine
    commands:
      - ls -al
      - docker ps


#volumes:
#  - name: cache
#    host:
#      path: /data/composer

trigger:
  branch:
    - master
